#!/usr/bin/perl -w -- 
# generated by wxGlade 0.6.3 on Thu Nov 12 16:04:20 2009
# To get wxPerl visit http://wxPerl.sourceforge.net/

use Wx 0.15 qw[:allclasses];
use strict;

package MyFrame;

use Wx qw[:everything];
use base qw(Wx::Frame);
use strict;

sub new {
	my( $self, $parent, $id, $title, $pos, $size, $style, $name ) = @_;
	$parent = undef              unless defined $parent;
	$id     = -1                 unless defined $id;
	$title  = ""                 unless defined $title;
	$pos    = wxDefaultPosition  unless defined $pos;
	$size   = wxDefaultSize      unless defined $size;
	$name   = ""                 unless defined $name;

# begin wxGlade: MyFrame::new

	$style = wxICONIZE|wxCAPTION|wxMINIMIZE 
		unless defined $style;

	$self = $self->SUPER::new( $parent, $id, $title, $pos, $size, $style, $name );
	# FIXME Hardcoded path!
	$self->{logo} = Wx::StaticBitmap->new($self, -1, Wx::Bitmap->new("QVD-Client/bin/qvd-logo.png", wxBITMAP_TYPE_ANY), wxDefaultPosition, wxDefaultSize, );
	$self->{m_staticText1} = Wx::StaticText->new($self, -1, "Usuario", wxDefaultPosition, wxDefaultSize, );
	$self->{username} = Wx::TextCtrl->new($self, -1, "qvd", wxDefaultPosition, wxDefaultSize, );
	$self->{m_staticText11} = Wx::StaticText->new($self, -1, "ContraseÃ±a", wxDefaultPosition, wxDefaultSize, );
	$self->{password} = Wx::TextCtrl->new($self, -1, "passw0rd", wxDefaultPosition, wxDefaultSize, wxTE_PASSWORD);
	$self->{m_staticText12} = Wx::StaticText->new($self, -1, "Servidor", wxDefaultPosition, wxDefaultSize, );
	$self->{host} = Wx::TextCtrl->new($self, -1, "aguila", wxDefaultPosition, wxDefaultSize, );
	$self->{port} = Wx::TextCtrl->new($self, -1, "8080", wxDefaultPosition, wxDefaultSize, );
	$self->{connect_button} = Wx::Button->new($self, -1, "Conectar");

	$self->__set_properties();
	$self->__do_layout();

	Wx::Event::EVT_BUTTON($self, $self->{connect_button}->GetId, \&OnClick);

# end wxGlade
	return $self;

}


sub __set_properties {
	my $self = shift;

# begin wxGlade: MyFrame::__set_properties

	$self->SetTitle("QVD");
	my $icon = Wx::Icon->new();
	# FIXME Hardcoded path!
	$icon->CopyFromBitmap(Wx::Bitmap->new("QVD-Client/bin/qvd.xpm", wxBITMAP_TYPE_ANY));
	$self->SetIcon($icon);
	$self->{connect_button}->SetDefault();

# end wxGlade
}

sub __do_layout {
	my $self = shift;

# begin wxGlade: MyFrame::__do_layout

	$self->{object_1} = Wx::BoxSizer->new(wxVERTICAL);
	$self->{object_2} = Wx::GridSizer->new(1, 2, 0, 0);
	$self->{object_3} = Wx::BoxSizer->new(wxHORIZONTAL);
	$self->{object_1}->Add($self->{logo}, 0, wxLEFT|wxRIGHT|wxTOP|wxALIGN_CENTER_HORIZONTAL, 20);
	$self->{object_2}->Add($self->{m_staticText1}, 0, wxALL, 5);
	$self->{object_2}->Add($self->{username}, 1, wxALL|wxEXPAND, 5);
	$self->{object_2}->Add($self->{m_staticText11}, 0, wxALL, 5);
	$self->{object_2}->Add($self->{password}, 1, wxALL|wxEXPAND, 5);
	$self->{object_2}->Add($self->{m_staticText12}, 0, wxALL, 5);
	$self->{object_3}->Add($self->{host}, 1, wxALL|wxEXPAND, 5);
	$self->{object_3}->Add($self->{port}, 1, wxALL|wxEXPAND, 5);
	$self->{object_2}->Add($self->{object_3}, 1, wxEXPAND, 5);
	$self->{object_1}->Add($self->{object_2}, 1, wxALL|wxEXPAND, 20);
	$self->{object_1}->Add($self->{connect_button}, 0, wxLEFT|wxRIGHT|wxBOTTOM|wxEXPAND, 20);
	$self->SetSizer($self->{object_1});
	$self->{object_1}->Fit($self);
	$self->Layout();
	$self->Centre();

# end wxGlade
}

sub OnClick {
    my( $self, $event ) = @_;
    @ARGV = ($self->{username}->GetValue, $self->{password}->GetValue, $self->{host}->GetValue, $self->{port}->GetValue);
    do "QVD-Client/bin/qvd-client.pl";
    
    $self->SetTitle($@." | ".$!);
}


# end of class MyFrame

1;

1;

package main;

unless(caller){
	local *Wx::App::OnInit = sub{1};
	my $app = Wx::App->new();
	Wx::InitAllImageHandlers();

	my $panel = MyFrame->new();

	$app->SetTopWindow($panel);
	$panel->Show(1);
	$app->MainLoop();
}


__END__

=head1 NAME

qvd-gui-client.pl

=head1 DESCRIPTION

probe of concept graphic client for the new QVD

=cut
