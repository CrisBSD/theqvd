[[QVD_NODE]]
QVD Server Nodes are the work-horses within the QVD infrastructure. They consist of
three major components:

* *QVD Node* - Responsible for managing the L7R and HKD elements
* *L7R* - A Layer-7 Router that acts as the broker within the server
  environment, responsible for authenticating users, establishing
  sessions and routing connections to the appropriate virtual IP
  addresses. In general, the L7R is responsible for managing user
  status.
* *HKD* - A 'House Keeping Daemon' that tracks the status of virtual·
  machines. The HKD is responsible for starting and stopping virtual
  machines. The HKD monitors the health of each virtual machine and·
  then updates status information within the QVD Database, so that·
  other Nodes and the administration tools are able to function·
  accordingly. In general, the HKD is responsible for managing virtual
  machine status.

Usually Server Nodes are installed across a number of systems running as a cluster.
This means that within a typical deployment you are likely to have any number
of Server Nodes that will need to be installed and configured.

You should familiarize yourself with the general architecture of a server node
by referring to the chapter in this manual labelled _Components and Architecture_ and in
particular the subsection labelled <<qvd_node_architecture,QVD Server Architecture>>.

Installation of a QVD Server Node
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
On any of the systems that you intend to install the QVD Server Node components, you will need to add
the QVD repository to your apt sources. You can do this with the
following command:

----
sudo apt-add-repository ppa:qvd-qindel/qvd-3.1
----

Execute `apt-get update` after modifying sources.list.

To install all of the QVD Server Node components and their dependencies, run the following command:

----
# sudo apt-get install qvd-node
----

This will install all of the qvd-node components along with any existing dependencies. In general
we recommend that the QVD CLI Administration Utility is installed on any of the QVD Server Node systems
as well, since it is common to work directly from these systems to configure QVD quickly. You can
find out more about this utility in the following chapter labelled <<qvd-admin-cli, QVD CLI Administration Utility>>.

Base Configuration
~~~~~~~~~~~~~~~~~~
As with most other QVD infrastructure components, every QVD Server Node requires access to the QVD Database.
You will need to ensure that the QVD Node configuration file is set up correctly in order for the QVD Server Node 
to function properly. You can find out how to do this in chapter titled
<<qvd_db_config,QVD Base Configuration>>.

Unlike most other components, QVD Server Nodes require an additional entry within the QVD Base Configuration
file in order to be able to quickly search within the QVD-DB. This is a single line entry that should be
appended to your configuration, containing the *nodename* which should match the name that you assign to
your node when you register it within the QVD-DB, either using QVD-WAT or using the·QVD CLI Administration Utility.

In general, we recommend that you name your nodes using the hostname of the system that they are running on.

This can be quickly achieved by doing something like the following:

----
echo "nodename=`hostname`" >> /etc/qvd/node.conf
----

include::NetworkingRequirements.txt[]

Configuring SSL
~~~~~~~~~~~~~~~
The QVD server needs an x509 certificate and private key for securing
network connections. For a production installation you should use a
certificate issued by a recognized certificate authority, such as
Verisign or Thawte. For testing purposes you can use a self-signed
certificate. We provide instructions on creating a self-signed certificate
in the _Guide to Getting Started With QVD_.

If you have a certificate signed by a third party, you can register it with
QVD using the QVD CLI Administration Utility:

----
# qvd-admin.pl config ssl key=/path/to/private/key.pem cert=/path/to/server/certificate.pem
----
